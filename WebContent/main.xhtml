<!-- 
Authors: Will Bierer, Brendan Brooks
 Class: CST-235
 Prof. Reha
 
 File Description: Main page of applcation.  User can view, join, and create lobbies.
 -->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough" 
      xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>
	<title>Meme</title>
</h:head> 
<body> 
	
	<ui:composition template="/layouts/mainTemplate.xhtml">
	<ui:define name="title">Home</ui:define>
	<ui:define name="content">
	<div class="col-md-3"></div>
	<div class="col-md-6 main-content" style="">
	<div align="center">
	<h:form action="lobbyController">
		<h1>Lobbies</h1><a href="javascript:void(0)"><button type="button" class="btn btn-primary" id="addLobbyBtn">Create</button></a>
	</h:form>
	<div id="addLobby">
		<br />
	<h:form method="post">
	    <label for="name">Lobby Name</label><br/>
	    <h:message for="name"></h:message>
	    <h:inputText id="name" type="text" class="form-control" value="#{lobby.name}" a:placeholder="Lobby Name"/>
	    <label id="password" for="password">Password (Leave empty for no password)</label>
	    <h:inputSecret type="password" value="#{lobby.password}" class="form-control" a:placeholder="If no password, leave empty" /><br/>
  	<h:commandButton styleClass="btn btn-primary" action="#{lobbyController.addLobby}" value="Submit" />
	</h:form>
</div>
	<hr />
	<h:dataTable value="#{lobbyController.service.getLobbies()}" var="o" styleClass="table-hover" style="width: 100%">
		<h:column>
			<f:facet name="header">Lobby</f:facet>
			#{o.name}
		</h:column>
		<h:column>
			<f:facet name="header">User</f:facet>
			#{o.host}
		</h:column>
		<h:column>
			<f:facet name="header">Players</f:facet>
			#{o.players}/2
		</h:column>
		<h:column>
			<f:facet name="header"></f:facet>
			<h:form method="post">
				<input value="#{o.id}" type="hidden" id="id" name="id" />
			<h:commandButton class="btn btn-primary" action="#{lobbyController.joinLobby}" value="Join" />
			</h:form>
		</h:column>
	</h:dataTable>
	
		<button type="button" class="btn btn-default" data-toggle="modal" data-target="#myModal">Edit Profile</button>

		<!-- Modal -->
		<div id="myModal" class="modal fade" role="dialog">
		  <div class="modal-dialog">
		
		    <!-- Modal content-->
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal">&times;</button>
		        <h4 class="modal-title">Edit Profile</h4>
		        <h:form>
					<h:commandLink action="#{loginController.deleteUser}" value="Delete"/>
				</h:form>
		      </div>
		      <div class="modal-body">
				<h:form method="post">
					First Name: <h:inputText type="text" class="form-control" name="firstName" value="#{user.firstName}"/><br/><br/>
					Last Name: <h:inputText type="text" class="form-control" name="lastName" title="" value="#{user.lastName}" /><br/>
					Email: <h:inputText type="text" class="form-control" name="email" title="" value="#{user.email}" /><br/>
					Phone: <h:inputText type="text" class="form-control" name="phone" title="" value="#{user.phone}"/><br/>
					Username: <h:inputText type="text" class="form-control" name="username" title="" value="#{user.username}" /><br/>
					Password: <h:inputSecret type="text" class="form-control" name="password" title="" value="#{user.password}" /><br/>
					<h:inputHidden value="#{user.id}" id="id" />
					<!-- Confirm Password: <h:inputText type="text" class="form-control" name="confirm" title="" /><br/> -->
					<h:commandButton type="submit" value="submit" action="#{loginController.updateUser}" class="btn btn-default "/> 
				</h:form>
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		      </div>
		    </div>
		
		  </div>
		</div>
	</div>
	</div>
	</ui:define>
	</ui:composition>
</body> 
</html>
